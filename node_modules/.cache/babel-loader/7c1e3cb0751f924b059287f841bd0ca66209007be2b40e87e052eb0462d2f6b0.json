{"ast":null,"code":"\"use strict\";\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nconst randomstring_1 = __importDefault(require(\"randomstring\"));\nconst useExtension_1 = require(\"./useExtension\");\nfunction useInitiateRequest({\n  presentationDefinition,\n  callbackUrl\n}) {\n  const {\n    isInitializing,\n    isExtensionInstalled,\n    client\n  } = (0, useExtension_1.useExtension)();\n  async function handleInitiate() {\n    if (!isExtensionInstalled) {\n      window.location.href = client.getChromeWebStoreUrl();\n      return;\n    }\n    client.initiateAuth({\n      nonce: randomstring_1.default.generate(),\n      state: randomstring_1.default.generate(),\n      responseDestination: {\n        responseMode: 'query',\n        redirectUri: `${callbackUrl}`\n      },\n      presentationDefinition\n    });\n  }\n  return {\n    isInitializing,\n    isExtensionInstalled,\n    handleInitiate\n  };\n}\nexports.default = useInitiateRequest;","map":{"version":3,"names":["randomstring_1","__importDefault","require","useExtension_1","useInitiateRequest","presentationDefinition","callbackUrl","isInitializing","isExtensionInstalled","client","useExtension","handleInitiate","window","location","href","getChromeWebStoreUrl","initiateAuth","nonce","default","generate","state","responseDestination","responseMode","redirectUri","exports"],"sources":["../../src/hooks/useInitiateRequest.ts"],"sourcesContent":[null],"mappings":";;;;;;;;;;AAAA,MAAAA,cAAA,GAAAC,eAAA,CAAAC,OAAA;AACA,MAAAC,cAAA,GAAAD,OAAA;AASA,SAAwBE,kBAAkBA,CAAC;EAAEC,sBAAsB;EAAEC;AAAW,CAAoB;EAClG,MAAM;IAAEC,cAAc;IAAEC,oBAAoB;IAAEC;EAAM,CAAE,GAAG,IAAAN,cAAA,CAAAO,YAAY,GAAE;EAEvE,eAAeC,cAAcA,CAAA;IAC3B,IAAI,CAACH,oBAAoB,EAAE;MACzBI,MAAM,CAACC,QAAQ,CAACC,IAAI,GAAGL,MAAM,CAACM,oBAAoB,EAAE;MACpD;;IAGFN,MAAM,CAACO,YAAY,CAAC;MAClBC,KAAK,EAAEjB,cAAA,CAAAkB,OAAY,CAACC,QAAQ,EAAE;MAC9BC,KAAK,EAAEpB,cAAA,CAAAkB,OAAY,CAACC,QAAQ,EAAE;MAC9BE,mBAAmB,EAAE;QACnBC,YAAY,EAAE,OAAO;QACrBC,WAAW,EAAE,GAAGjB,WAAW;OAC5B;MACDD;KACD,CAAC;EACJ;EAEA,OAAO;IACLE,cAAc;IACdC,oBAAoB;IACpBG;GACD;AACH;AAzBAa,OAAA,CAAAN,OAAA,GAAAd,kBAAA"},"metadata":{},"sourceType":"script","externalDependencies":[]}